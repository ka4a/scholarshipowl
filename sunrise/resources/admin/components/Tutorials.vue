<template>
  <div class="tutorials">

    <transition name="zoom-out">
      <div v-if="active === 'newScholarship'" class="modal is-active tutorial-new-scholarship">
        <svg class="tutorial-background" width="100%" height="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink= "http://www.w3.org/1999/xlink">
          <defs>
            <mask id="button-mask">
              <rect width="100%" height="100%" fill="white" />
              <rect style="border-radius: 50px" x="16" y="69" width="218" height="70" rx="35" ry="35" />
            </mask>
          </defs>
          <rect width="100%" height="100%" mask="url(#button-mask)" />
        </svg>
        <div class="modal-content animation-content">
          <div class="box">
            <i class="boxclose" @click="close('newScholarship')" />
            <i class="boxcorner" />
            <svg class="ilustration" width="43" height="52" viewBox="0 0 43 52" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M36.4551 25.2993C36.2985 20.3362 34.9359 15.4689 32.4899 11.1652C29.8859 6.5833 26.1273 2.76892 21.6206 0.134596C21.3137 -0.0448652 20.9362 -0.0448652 20.6293 0.134596C16.1227 2.76892 12.3641 6.5833 9.75994 11.1651C7.31403 15.4688 5.95137 20.3361 5.79482 25.2992C2.30163 26.8271 0 30.3428 0 34.2622V41.4375C0 41.9984 0.446216 42.4531 0.996462 42.4531H15.6386C15.8533 45.508 17.1656 48.434 19.3138 50.5914L20.4256 51.7079C20.6195 51.9026 20.8722 52 21.125 52C21.3778 52 21.6304 51.9026 21.8244 51.7079L22.9362 50.5914C25.0844 48.434 26.3967 45.5081 26.6114 42.4532H29.6946V47.6951C29.6946 48.256 30.1408 48.7107 30.691 48.7107C31.2413 48.7107 31.6875 48.256 31.6875 47.6951V42.4531H41.2535C41.8038 42.4531 42.25 41.9984 42.25 41.4375V34.2623C42.25 30.3428 39.9483 26.8271 36.4551 25.2993ZM21.125 2.19347C24.2581 4.11493 26.9364 6.629 29.0542 9.54689H13.1957C15.3136 6.629 17.9919 4.11493 21.125 2.19347ZM1.99292 40.4219V34.2622C1.99292 31.4697 3.46868 28.9361 5.77948 27.5749V39.4062C5.77948 39.7623 5.84026 40.104 5.95087 40.4219H1.99292ZM21.5374 49.1444L21.125 49.5586L20.7126 49.1444C18.9419 47.3664 17.848 44.9667 17.6377 42.4531H24.6123C24.4019 44.9667 23.3079 47.3664 21.5374 49.1444ZM34.4776 39.4062C34.4776 39.9663 34.0306 40.4219 33.4811 40.4219H8.76886C8.21941 40.4219 7.7724 39.9663 7.7724 39.4062V26.2628C7.7724 22.5853 8.48507 19.0017 9.80797 15.6914H14.3199C14.8701 15.6914 15.3163 15.2367 15.3163 14.6758C15.3163 14.1149 14.8701 13.6602 14.3199 13.6602H10.7133C11.0635 12.95 11.4433 12.2555 11.8509 11.5781H30.3991C33.0183 15.9305 34.4776 21.0003 34.4776 26.2628V39.4062ZM40.2571 40.4219H36.2991C36.4097 40.104 36.4705 39.7623 36.4705 39.4062V27.575C38.7813 28.9361 40.2571 31.4697 40.2571 34.2623V40.4219Z" fill="black"/>
              <path d="M21.1255 2.19336C24.2586 4.11482 26.9369 6.62889 29.0548 9.54678H13.1963C15.3142 6.62889 17.9925 4.11482 21.1255 2.19336Z" fill="#FFEBED"/>
              <path d="M1.99316 40.4221V34.2625C1.99316 31.47 3.46892 28.9363 5.77972 27.5752V39.4065C5.77972 39.7626 5.8405 40.1042 5.95111 40.4221H1.99316Z" fill="#CE818C"/>
              <path d="M40.2568 40.422H36.2988C36.4094 40.1041 36.4702 39.7625 36.4702 39.4064V27.5752C38.781 28.9362 40.2568 31.4699 40.2568 34.2625V40.422Z" fill="#FFEBED"/>
              <path d="M34.4776 39.4062C34.4776 39.9662 34.0306 40.4218 33.4812 40.4218H8.76892C8.21947 40.4218 7.77246 39.9662 7.77246 39.4062V26.2628C7.77246 22.5853 8.48513 19.0017 9.80803 15.6914H14.3199C14.8702 15.6914 15.3164 15.2367 15.3164 14.6758C15.3164 14.1148 14.8702 13.6602 14.3199 13.6602H10.7133C11.0636 12.95 11.4433 12.2554 11.851 11.5781H30.3991C33.0183 15.9305 34.4776 21.0003 34.4776 26.2628V39.4062Z" fill="#FB9CAA"/>
              <path d="M21.5374 49.1445L21.125 49.5586L20.7126 49.1445C18.942 47.3664 17.848 44.9667 17.6377 42.4531H24.6123C24.4019 44.9667 23.308 47.3664 21.5374 49.1445Z" fill="#D73148"/>
              <path d="M21.125 16.7583C16.1252 16.7583 12.0576 20.9041 12.0576 26.0001C12.0576 27.7943 12.5624 29.4703 13.434 30.8895C13.4605 30.9419 13.4924 30.9922 13.5285 31.0402C15.1483 33.5678 17.9483 35.2418 21.125 35.2418C26.1249 35.2418 30.1924 31.096 30.1924 26.0001C30.1924 20.9042 26.1249 16.7583 21.125 16.7583ZM14.5771 28.7261C14.2386 27.8846 14.0504 26.9645 14.0504 26.0001C14.0505 22.0241 17.2241 18.7895 21.125 18.7895C23.512 18.7895 25.625 20.0019 26.9069 21.853L21.4342 27.4309L19.3456 25.3022C18.9564 24.9056 18.3257 24.9057 17.9363 25.3022L14.5771 28.7261ZM21.125 33.2106C18.9065 33.2106 16.9241 32.1635 15.626 30.5297L18.641 27.4567L20.7296 29.5853C21.1188 29.9819 21.7496 29.9818 22.1389 29.5853L27.8498 23.7646C28.0758 24.4688 28.1996 25.2198 28.1996 26C28.1995 29.9759 25.0259 33.2106 21.125 33.2106Z" fill="black"/>
              <path d="M14.5774 28.7261C14.2389 27.8846 14.0508 26.9645 14.0508 26.0001C14.0509 22.0241 17.2244 18.7896 21.1254 18.7896C23.5124 18.7896 25.6254 20.0019 26.9072 21.853L21.4346 27.4309L19.346 25.3022C18.9568 24.9056 18.326 24.9057 17.9367 25.3022L14.5774 28.7261Z" fill="white"/>
              <path d="M21.125 33.2107C18.9064 33.2107 16.9241 32.1636 15.626 30.5297L18.641 27.4567L20.7296 29.5854C21.1188 29.982 21.7495 29.9819 22.1388 29.5854L27.8498 23.7646C28.0758 24.4689 28.1995 25.2198 28.1995 26C28.1994 29.976 25.0258 33.2107 21.125 33.2107Z" fill="#CE818C"/>
              <path d="M18.6403 13.9577C18.4551 13.7688 18.198 13.6602 17.9359 13.6602C17.6738 13.6602 17.4168 13.7688 17.2314 13.9577C17.0461 14.1466 16.9395 14.4087 16.9395 14.6758C16.9395 14.9429 17.046 15.2049 17.2314 15.3938C17.4169 15.5827 17.6738 15.6914 17.9359 15.6914C18.198 15.6914 18.4551 15.5827 18.6403 15.3938C18.8257 15.2049 18.9324 14.9429 18.9324 14.6758C18.9324 14.4087 18.8258 14.1466 18.6403 13.9577Z" fill="black"/>
              <path d="M11.559 45.1699C11.0087 45.1699 10.5625 45.6246 10.5625 46.1855V49.3143C10.5625 49.8752 11.0087 50.3299 11.559 50.3299C12.1092 50.3299 12.5554 49.8752 12.5554 49.3143V46.1855C12.5554 45.6246 12.1092 45.1699 11.559 45.1699Z" fill="black"/>
              <path d="M31.3952 50.2663C31.21 50.0774 30.9529 49.9688 30.6908 49.9688C30.4287 49.9688 30.1716 50.0774 29.9863 50.2663C29.801 50.4552 29.6943 50.7173 29.6943 50.9844C29.6943 51.2515 29.8009 51.5135 29.9863 51.7024C30.1717 51.8913 30.4287 52 30.6908 52C30.9529 52 31.21 51.8913 31.3952 51.7024C31.5805 51.5135 31.6873 51.2515 31.6873 50.9844C31.6873 50.7173 31.5806 50.4552 31.3952 50.2663Z" fill="black"/>
            </svg>
            <div class="content">
              <p class="title">Excelent.</p>
              <p class="subtitle">Create your first scholarship now!</p>
            </div>
          </div>
        </div>
      </div>
    </transition>

  </div>
</template>
<script>
export default {
  data: function() {
    return {
      scroll: 'clip',
      savedScrollTop: null,
    };
  },
  computed: {
    active: ({ $store }) => $store.getters['user/tutorials/active'],
  },
  watch: {
    active: {
      immediate: true,
      handler() {
        this.handleScroll();
      }
    },
  },
  methods: {
    close(tutorial) {
      this.$store.dispatch('user/tutorials/close', tutorial);
    },
    handleScroll() {
      if (typeof window === 'undefined') return
      if (this.scroll === 'clip') {
        if (this.active) {
          document.documentElement.classList.add('is-clipped')
        } else {
          document.documentElement.classList.remove('is-clipped')
        }
        return
      }
      this.savedScrollTop = !this.savedScrollTop
        ? document.documentElement.scrollTop
        : this.savedScrollTop
      if (this.active) {
        document.body.classList.add('is-noscroll')
      } else {
        document.body.classList.remove('is-noscroll')
      }
      if (this.active) {
        document.body.style.top = `-${this.savedScrollTop}px`
        return
      }
      document.documentElement.scrollTop = this.savedScrollTop
      document.body.style.top = null
      this.savedScrollTop = null
    },
  },
}
</script>
<style lang="scss" scoped>
@import '../scss/variables';

.tutorials {

  .tutorial-background {
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;

    > rect {
      fill: $modal-background;
    }
  }

  .tutorial-new-scholarship {

    .modal-content {
      overflow: visible;
      position: fixed;
      top: 165px;
      left: 16px;

      width: auto !important;

      > .box {
        display: flex;
        padding: 30px;

        .content {
          padding-right: 42px;
        }
      }
    }

    .title {
      font-size: 24px;
      color: #061C2E;
    }

    .subtitle {
      font-size: 18px;
    }

    .ilustration {
      margin-right: 25px;
    }

    .boxcorner {
      background: white;
      position: absolute;
      top: -12px;
      left: 50px;
      width: 24px;
      height: 24px;
      transform: rotate(45deg);
    }
  }

}
</style>
